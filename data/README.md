# Joining by zip3
Most of the data we obtain will be by county.
The tibble stored in `zip3_rel.feather` contains informations about intersections
of counties and ZIP3 codes. The variables are
* state, county, zip3: character strings
* POPPT, HUPT, AREAPT, AREALANDPT: population, housing units, area and land area in each intersection of county and zip3.

These variables can be used to take weighted averages e.g. by population or area. See `hesitancy.R` for an example.

# Vaccine hesitancy data
See [this story from the CDC](https://data.cdc.gov/stories/s/Vaccine-Hesitancy-for-COVID-19/cnd2-a6zw).
Contains PUMA-level estimation for vaccine hesitancy, along with county-level information of other data.

The file `vaccine_hesitancy.feather` in the data repository is generated by `vaccine_hesitancy.R`. The tibble contains 3,142 rows with the following variables:
* state: 2 char state number
* county: 3 char county number
* hesitant: estimated hesitant to take vaccine, 0-1.
* svi: Social vulnerability index, 0-1.
* cvac: Level of concern for vaccination rollout, 0-1.

# Census data
The files `pop_den.feather` and `pop_sex_age.feather` are generated by `census.R`.

The file `pop_den.feather` contains a tibble with 3,220 rows and the variables:
* state: 2 char state number
* county: 3 char county number
* POP: population (in June 2019)
* DENSITY: population density (in June 2019)

The file `pop_sex_age.feather` contains information about population by sex and age group. It contains a tibble with 209,120 rows and the variables:
* state: 2 char state number
* county: 3 char county number
* POP: population
* SEX: gender, 0 = all, 1 = male, 2 = female
* AGEGROUP: a number between 0 and 31. See the table below.

Number | Description
-------|------------
0 | All ages
1 | Age 0 to 4 years
2 | Age 5 to 9 years
3 | Age 10 to 14 years
4 | Age 15 to 19 years
5 | Age 20 to 24 years
6 | Age 25 to 29 years
7 | Age 30 to 34 years
8 | Age 35 to 39 years
9 | Age 40 to 44 years
10 | Age 45 to 49 years
11 | Age 50 to 54 years
12 | Age 55 to 59 years
13 | Age 60 to 64 years
14 | Age 65 to 69 years
15 | Age 70 to 74 years
16 | Age 75 to 79 years
17 | Age 80 to 84 years
18 | Age 85 years and older
19 | Under 18 years  
20 | 5 to 13 years  
21 | 14 to 17 years  
22 | 18 to 64 years  
23 | 18 to 24 years  
24 | 25 to 44 years  
25 | 45 to 64 years  
26 | 65 years and over  
27 | 85 years and over  
28 | 16 years and over  
29 | 18 years and over  
30 | 15 to 44 years   
31 | Median age


# Census API information

We use the [tidycensus](https://walker-data.com/tidycensus/index.html) package to obtain the data.
Install it using `install.packages("tidycensus")`.

See the file `census.R` for some ideas.

Use `geography="zcta"` with `get_acs()` or `get_decennial()` to get results by ZIP code.

We also use [censusapi](https://www.hrecht.com/censusapi/). See the file `census.R` for some examples.

### Some things to note
* `acs/acs1` has data only for areas with population 65,000+. See [here](https://www.census.gov/programs-surveys/acs/geography-acs/areas-published.html) for the precises numbers.
* `acs` doesn't seem to do ZIP codes, while `dec` does. We should think about how to join the data.
* See the [Geography reference files](https://www.census.gov/geographies/reference-files.2020.html) for more info on geographies. Relationship files can be used to map e.g. counties to ZIP codes, and gazetteer files give information on the area, e.g. land surface area.
* `cbp` contains payroll information wrt industry, company size, etc...
